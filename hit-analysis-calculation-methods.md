# å‘½ä¸­åˆ†æè®¡ç®—æ–¹æ³•è¯¦è§£ä¸ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“Š å½“å‰è®¡ç®—æ–¹æ³•åˆ†æ

### 1. ç°æœ‰å®ç°ä½ç½®

**æ ¸å¿ƒä»£ç **: `src/server/server.js`
- **Line 12033**: `calculatePrizeStats()` - å¥–é¡¹ç»Ÿè®¡è®¡ç®—å‡½æ•°
- **Line 12112-12156**: éå†æ‰€æœ‰çº¢çƒ+è“çƒç»„åˆï¼Œåˆ¤æ–­å¥–é¡¹
- **Line 15500+**: æ—§ç‰ˆå‘½ä¸­åˆ†æå‡½æ•°ï¼ˆå¯èƒ½å·²å¼ƒç”¨ï¼‰

### 2. å½“å‰è®¡ç®—é€»è¾‘è¯¦è§£

#### æ­¥éª¤1: è·å–å¼€å¥–å·ç 
```javascript
// ä»hit_dltsè¡¨æŸ¥è¯¢å¼€å¥–ç»“æœ
const actualRed = [Red1, Red2, Red3, Red4, Red5];  // å®é™…å¼€å¥–çš„5ä¸ªçº¢çƒ
const actualBlue = [Blue1, Blue2];                  // å®é™…å¼€å¥–çš„2ä¸ªè“çƒ
```

#### æ­¥éª¤2: è®¡ç®—æ¯ä¸ªçº¢çƒç»„åˆçš„å‘½ä¸­æ•°
```javascript
// éå†é¢„æµ‹çš„çº¢çƒç»„åˆï¼ˆä¾‹: 132,740ä¸ªï¼‰
for (const redCombo of redCombinations) {
    const redArray = [red1, red2, red3, red4, red5];
    const hitCount = redArray.filter(num => actualRed.includes(num)).length;
    redHits.push({ combination: redArray, hits: hitCount });  // hits = 0~5
}
```

#### æ­¥éª¤3: è®¡ç®—æ¯ä¸ªè“çƒç»„åˆçš„å‘½ä¸­æ•°
```javascript
// éå†é¢„æµ‹çš„è“çƒç»„åˆï¼ˆ66ä¸ªï¼‰
for (const blueCombo of blueCombinations) {
    const blueArray = [blue1, blue2];
    const hitCount = blueArray.filter(num => actualBlue.includes(num)).length;
    blueHits.push({ combination: blueArray, hits: hitCount });  // hits = 0~2
}
```

#### æ­¥éª¤4: ç¬›å¡å°”ç§¯è®¡ç®—æ‰€æœ‰ç»„åˆçš„å¥–é¡¹
```javascript
// ğŸ”´ å…³é”®ä»£ç : åµŒå¥—å¾ªç¯éå†æ‰€æœ‰ç»„åˆ (src/server/server.js:12112-12156)
for (const redHit of redHits) {              // 132,740æ¬¡å¾ªç¯
    for (const blueHit of blueHits) {        // 66æ¬¡å¾ªç¯
        const redHitCount = redHit.hits;     // 0~5
        const blueHitCount = blueHit.hits;   // 0~2

        // æ ¹æ®å¤§ä¹é€è§„åˆ™åˆ¤æ–­å¥–é¡¹
        if (redHitCount === 5 && blueHitCount === 2) {
            prize_stats.first_prize.count++;      // ä¸€ç­‰å¥– 5+2
            prize_stats.first_prize.amount += 10000000;
        } else if (redHitCount === 5 && blueHitCount === 1) {
            prize_stats.second_prize.count++;     // äºŒç­‰å¥– 5+1
            prize_stats.second_prize.amount += 100000;
        } else if (redHitCount === 5 && blueHitCount === 0) {
            prize_stats.third_prize.count++;      // ä¸‰ç­‰å¥– 5+0
            prize_stats.third_prize.amount += 10000;
        } else if (redHitCount === 4 && blueHitCount === 2) {
            prize_stats.fourth_prize.count++;     // å››ç­‰å¥– 4+2
            prize_stats.fourth_prize.amount += 3000;
        } else if (redHitCount === 4 && blueHitCount === 1) {
            prize_stats.fifth_prize.count++;      // äº”ç­‰å¥– 4+1 æˆ– 3+2
        } else if (redHitCount === 3 && blueHitCount === 2) {
            prize_stats.fifth_prize.count++;      // äº”ç­‰å¥– 3+2
        }
        // ... å…¶ä»–å¥–é¡¹ç±»ä¼¼
    }
}

// æ€»å¾ªç¯æ¬¡æ•°: 132,740 Ã— 66 = 8,760,840 æ¬¡
```

#### æ­¥éª¤5: è®¡ç®—å‘½ä¸­ç‡å’Œæ€»å¥–é‡‘
```javascript
const totalCombinations = redHits.length * blueHits.length;  // 8,760,840
const totalWinningCombos = ä¸€ç­‰å¥–æ¬¡æ•° + äºŒç­‰å¥–æ¬¡æ•° + ... + ä¹ç­‰å¥–æ¬¡æ•°;
const hitRate = (totalWinningCombos / totalCombinations) * 100;  // å‘½ä¸­ç‡
const totalPrize = æ‰€æœ‰å¥–é¡¹çš„æ€»å¥–é‡‘;
```

---

## ğŸ” å½“å‰æ–¹æ³•çš„é—®é¢˜åˆ†æ

### ä¼˜ç‚¹ âœ…
1. **é€»è¾‘æ¸…æ™°**: å®Œå…¨æŒ‰ç…§ç¬›å¡å°”ç§¯è®¡ç®—ï¼Œç»“æœå‡†ç¡®
2. **æ•°æ®æ­£ç¡®**: åªä¿å­˜IDï¼Œè¿è¡Œæ—¶æŸ¥è¯¢å®Œæ•´ç»„åˆå¹¶è®¡ç®—
3. **æ— éœ€é¢å¤–å­˜å‚¨**: ä¸ç”Ÿæˆå®Œå…¨ç»„åˆè¡¨

### ç¼ºç‚¹ âŒ
1. **è®¡ç®—é‡å·¨å¤§**:
   - é»˜è®¤æ¨¡å¼: 132,740 Ã— 66 = **8,760,840æ¬¡å¾ªç¯**
   - æ— é™åˆ¶æ¨¡å¼: 324,632 Ã— 66 = **21,445,712æ¬¡å¾ªç¯**
   - çœŸæ­£æ— é™åˆ¶: 324,632 Ã— 66 = **21,445,712æ¬¡å¾ªç¯**

2. **å†…å­˜å ç”¨é«˜**:
   - éœ€è¦åŠ è½½æ‰€æœ‰çº¢çƒç»„åˆï¼ˆ132,740ä¸ªæ•°ç»„ï¼Œæ¯ä¸ª5ä¸ªæ•°å­—ï¼‰
   - éœ€è¦åŠ è½½æ‰€æœ‰è“çƒç»„åˆï¼ˆ66ä¸ªæ•°ç»„ï¼Œæ¯ä¸ª2ä¸ªæ•°å­—ï¼‰
   - ä¼°è®¡å†…å­˜: ~50MB/æœŸ

3. **è®¡ç®—æ—¶é—´é•¿**:
   - å•æœŸè®¡ç®—æ—¶é—´: 5-30ç§’ï¼ˆå–å†³äºç»„åˆæ•°ï¼‰
   - 38æœŸä»»åŠ¡: 3-20åˆ†é’Ÿ

4. **æ•°æ®åº“æŸ¥è¯¢é¢‘ç¹**:
   - æ¯æœŸéœ€è¦æŸ¥è¯¢çº¢çƒç»„åˆè¡¨ + è“çƒç»„åˆè¡¨
   - å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ›´å·®

---

## ğŸ’¡ ä¼˜åŒ–æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ1: å½“å‰æ–¹æ¡ˆï¼ˆç¬›å¡å°”ç§¯å®Œå…¨è®¡ç®—ï¼‰âœ… å½“å‰ä½¿ç”¨

**åŸç†**:
- ä¿å­˜: çº¢çƒIDæ•°ç»„ + è“çƒIDæ•°ç»„
- è®¡ç®—: è¿è¡Œæ—¶æŸ¥è¯¢å®Œæ•´ç»„åˆï¼Œç¬›å¡å°”ç§¯éå†

**å­˜å‚¨éœ€æ±‚**:
```
æ¯æœŸæ•°æ® = çº¢çƒIDæ•°ç»„ + è“çƒIDæ•°ç»„ + å‘½ä¸­åˆ†æç»“æœ
         â‰ˆ (132,740 Ã— 4å­—èŠ‚) + (66 Ã— 4å­—èŠ‚) + 1KB
         â‰ˆ 531KB/æœŸ
38æœŸä»»åŠ¡ â‰ˆ 20MB
```

**è®¡ç®—å¤æ‚åº¦**: O(R Ã— B)ï¼ŒR=çº¢çƒæ•°ï¼ŒB=è“çƒæ•°

**ä¼˜ç‚¹**:
- âœ… ç©ºé—´æ•ˆç‡é«˜ï¼ˆä¸å­˜å®Œå…¨ç»„åˆï¼‰
- âœ… ç»“æœ100%å‡†ç¡®
- âœ… çµæ´»æ€§é«˜ï¼ˆå¯é‡æ–°è®¡ç®—ï¼‰

**ç¼ºç‚¹**:
- âŒ è®¡ç®—æ—¶é—´é•¿ï¼ˆ5-30ç§’/æœŸï¼‰
- âŒ å†…å­˜å ç”¨é«˜ï¼ˆéœ€åŠ è½½æ‰€æœ‰ç»„åˆï¼‰
- âŒ CPUå¯†é›†å‹ï¼ˆåµŒå¥—å¾ªç¯ï¼‰

**é€‚ç”¨åœºæ™¯**:
- âœ… ä»»åŠ¡ä¸é¢‘ç¹æ‰§è¡Œ
- âœ… ç»“æœéœ€è¦é•¿æœŸä¿å­˜
- âœ… å¯¹å‡†ç¡®æ€§è¦æ±‚æé«˜

---

### æ–¹æ¡ˆ2: ä¼˜åŒ–è®¡æ•°ç®—æ³•ï¼ˆæ•°å­¦ä¼˜åŒ–ï¼‰â­ æ¨è

**æ ¸å¿ƒæ€æƒ³**: ä¸ç”¨åµŒå¥—å¾ªç¯ï¼Œç”¨æ•°å­¦æ–¹æ³•ç›´æ¥è®¡ç®—

#### åŸç†è¯¦è§£

å‡è®¾:
- çº¢çƒç»„åˆä¸­ï¼Œå‘½ä¸­5ä¸ªçš„æœ‰ `R5` ä¸ªï¼Œå‘½ä¸­4ä¸ªçš„æœ‰ `R4` ä¸ªï¼Œå‘½ä¸­3ä¸ªçš„æœ‰ `R3` ä¸ª...
- è“çƒç»„åˆä¸­ï¼Œå‘½ä¸­2ä¸ªçš„æœ‰ `B2` ä¸ªï¼Œå‘½ä¸­1ä¸ªçš„æœ‰ `B1` ä¸ªï¼Œå‘½ä¸­0ä¸ªçš„æœ‰ `B0` ä¸ª

é‚£ä¹ˆå„å¥–é¡¹æ¬¡æ•°å¯ä»¥ç›´æ¥è®¡ç®—:

```javascript
// ä¸€ç­‰å¥– (5çº¢+2è“)
first_prize.count = R5 Ã— B2;

// äºŒç­‰å¥– (5çº¢+1è“)
second_prize.count = R5 Ã— B1;

// ä¸‰ç­‰å¥– (5çº¢+0è“)
third_prize.count = R5 Ã— B0;

// å››ç­‰å¥– (4çº¢+2è“)
fourth_prize.count = R4 Ã— B2;

// äº”ç­‰å¥– (4çº¢+1è“ æˆ– 3çº¢+2è“)
fifth_prize.count = (R4 Ã— B1) + (R3 Ã— B2);

// å…­ç­‰å¥– (4çº¢+0è“ æˆ– 3çº¢+1è“ æˆ– 2çº¢+2è“)
sixth_prize.count = (R4 Ã— B0) + (R3 Ã— B1) + (R2 Ã— B2);

// ä¸ƒç­‰å¥– (3çº¢+0è“ æˆ– 2çº¢+1è“ æˆ– 1çº¢+2è“)
seventh_prize.count = (R3 Ã— B0) + (R2 Ã— B1) + (R1 Ã— B2);

// å…«ç­‰å¥– (2çº¢+0è“ æˆ– 1çº¢+1è“ æˆ– 0çº¢+2è“)
eighth_prize.count = (R2 Ã— B0) + (R1 Ã— B1) + (R0 Ã— B2);

// ä¹ç­‰å¥– (1çº¢+0è“ æˆ– 0çº¢+1è“)
ninth_prize.count = (R1 Ã— B0) + (R0 Ã— B1);
```

#### å®ç°æ­¥éª¤

```javascript
// æ­¥éª¤1: ç»Ÿè®¡çº¢çƒå‘½ä¸­åˆ†å¸ƒï¼ˆO(R)ï¼Œ132,740æ¬¡å¾ªç¯ï¼‰
const redHitDistribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0, 0: 0 };
for (const redCombo of redCombinations) {
    const hitCount = countHits(redCombo, actualRed);
    redHitDistribution[hitCount]++;
}

// æ­¥éª¤2: ç»Ÿè®¡è“çƒå‘½ä¸­åˆ†å¸ƒï¼ˆO(B)ï¼Œ66æ¬¡å¾ªç¯ï¼‰
const blueHitDistribution = { 2: 0, 1: 0, 0: 0 };
for (const blueCombo of blueCombinations) {
    const hitCount = countHits(blueCombo, actualBlue);
    blueHitDistribution[hitCount]++;
}

// æ­¥éª¤3: æ•°å­¦è®¡ç®—å¥–é¡¹ï¼ˆO(1)ï¼Œå¸¸æ•°æ—¶é—´ï¼‰
const R5 = redHitDistribution[5];
const R4 = redHitDistribution[4];
const R3 = redHitDistribution[3];
const R2 = redHitDistribution[2];
const R1 = redHitDistribution[1];
const R0 = redHitDistribution[0];

const B2 = blueHitDistribution[2];
const B1 = blueHitDistribution[1];
const B0 = blueHitDistribution[0];

prize_stats.first_prize.count = R5 * B2;
prize_stats.second_prize.count = R5 * B1;
prize_stats.third_prize.count = R5 * B0;
prize_stats.fourth_prize.count = R4 * B2;
prize_stats.fifth_prize.count = (R4 * B1) + (R3 * B2);
prize_stats.sixth_prize.count = (R4 * B0) + (R3 * B1) + (R2 * B2);
prize_stats.seventh_prize.count = (R3 * B0) + (R2 * B1) + (R1 * B2);
prize_stats.eighth_prize.count = (R2 * B0) + (R1 * B1) + (R0 * B2);
prize_stats.ninth_prize.count = (R1 * B0) + (R0 * B1);
```

**è®¡ç®—å¤æ‚åº¦**: O(R + B)
- çº¢çƒå¾ªç¯: 132,740æ¬¡
- è“çƒå¾ªç¯: 66æ¬¡
- æ€»è®¡: **132,806æ¬¡** vs åŸæ¥çš„ **8,760,840æ¬¡**
- **æ€§èƒ½æå‡**: çº¦ **66å€**ï¼

**å­˜å‚¨éœ€æ±‚**: ä¸æ–¹æ¡ˆ1ç›¸åŒ

**ä¼˜ç‚¹**:
- âœ… æ€§èƒ½æå‡å·¨å¤§ï¼ˆ66å€åŠ é€Ÿï¼‰
- âœ… å†…å­˜å ç”¨ç›¸åŒ
- âœ… ç»“æœå®Œå…¨ç›¸åŒï¼ˆæ•°å­¦ç­‰ä»·ï¼‰
- âœ… ä»£ç ç®€æ´æ¸…æ™°
- âœ… æ— éœ€ä¿®æ”¹æ•°æ®ç»“æ„

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦ä¿®æ”¹ä»£ç é€»è¾‘
- âš ï¸ éœ€è¦æµ‹è¯•éªŒè¯æ­£ç¡®æ€§

**é€‚ç”¨åœºæ™¯**:
- âœ… æ‰€æœ‰åœºæ™¯ï¼ˆå®Œå…¨æ›¿ä»£æ–¹æ¡ˆ1ï¼‰

---

### æ–¹æ¡ˆ3: é¢„ç”Ÿæˆå®Œå…¨ç»„åˆè¡¨ï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰

**åŸç†**:
- ä¿å­˜: æ¯ä¸ªå®Œå…¨ç»„åˆ (5çº¢çƒ + 2è“çƒ) å•ç‹¬å­˜å‚¨
- è®¡ç®—: ç›´æ¥æŸ¥è¯¢å¹¶é€è¡Œåˆ¤æ–­

**å­˜å‚¨éœ€æ±‚**:
```
æ¯ä¸ªç»„åˆ = 7ä¸ªå·ç  + ç´¢å¼•
         â‰ˆ 40å­—èŠ‚
å•æœŸå®Œå…¨ç»„åˆè¡¨ = 8,760,840 Ã— 40å­—èŠ‚ â‰ˆ 350MB
38æœŸä»»åŠ¡ = 13.3GB
```

**è®¡ç®—å¤æ‚åº¦**: O(R Ã— B)ï¼Œä½†æ— éœ€æŸ¥è¯¢ç»„åˆè¡¨

**ä¼˜ç‚¹**:
- âœ… è®¡ç®—ç¨å¿«ï¼ˆå‡å°‘è¡¨æŸ¥è¯¢ï¼‰
- âœ… å¯ç›´æ¥å¯¼å‡ºå®Œå…¨ç»„åˆ

**ç¼ºç‚¹**:
- âŒ ç©ºé—´æ¶ˆè€—å·¨å¤§ï¼ˆ13.3GB vs 20MBï¼‰
- âŒ ç”Ÿæˆå®Œå…¨ç»„åˆè¡¨è€—æ—¶é•¿
- âŒ ä»éœ€éå†æ‰€æœ‰ç»„åˆï¼ˆ8ç™¾ä¸‡æ¬¡ï¼‰
- âŒ ä¸é€‚åˆå¤§ä»»åŠ¡

**é€‚ç”¨åœºæ™¯**:
- âš ï¸ å°è§„æ¨¡ä»»åŠ¡ï¼ˆ<10æœŸï¼Œé»˜è®¤æ¨¡å¼ï¼‰
- âš ï¸ éœ€è¦å¯¼å‡ºå®Œå…¨ç»„åˆçš„åœºæ™¯

---

### æ–¹æ¡ˆ4: æ··åˆæ–¹æ¡ˆï¼ˆæ™ºèƒ½é€‰æ‹©ï¼‰

**åŸç†**: æ ¹æ®ç»„åˆæ•°è‡ªåŠ¨é€‰æ‹©æ–¹æ¡ˆ

```javascript
const totalCombinations = redCount * blueCount;

if (totalCombinations < 100000) {
    // ä½¿ç”¨æ–¹æ¡ˆ1: ç¬›å¡å°”ç§¯å®Œå…¨è®¡ç®—
    return calculateByCartesianProduct();
} else {
    // ä½¿ç”¨æ–¹æ¡ˆ2: ä¼˜åŒ–è®¡æ•°ç®—æ³•
    return calculateByOptimizedCount();
}
```

**ä¼˜ç‚¹**:
- âœ… çµæ´»æ€§æœ€é«˜
- âœ… å°ä»»åŠ¡ä¿æŒå‡†ç¡®æ€§
- âœ… å¤§ä»»åŠ¡äº«å—æ€§èƒ½æå‡

**ç¼ºç‚¹**:
- âš ï¸ ä»£ç å¤æ‚åº¦å¢åŠ 

---

## ğŸ“‹ æ–¹æ¡ˆæ€»ç»“å¯¹æ¯”è¡¨

| æ–¹æ¡ˆ | è®¡ç®—æ—¶é—´/æœŸ | å†…å­˜å ç”¨ | å­˜å‚¨ç©ºé—´/38æœŸ | å¼€å‘éš¾åº¦ | æ¨èåº¦ |
|------|------------|----------|--------------|---------|--------|
| æ–¹æ¡ˆ1: å½“å‰æ–¹æ¡ˆ | 5-30ç§’ | 50MB | 20MB | ç®€å• | â­â­â­ |
| æ–¹æ¡ˆ2: ä¼˜åŒ–è®¡æ•° | 0.1-0.5ç§’ | 10MB | 20MB | ä¸­ç­‰ | â­â­â­â­â­ |
| æ–¹æ¡ˆ3: å®Œå…¨ç»„åˆè¡¨ | 3-15ç§’ | 100MB | 13.3GB | ä¸­ç­‰ | â­ |
| æ–¹æ¡ˆ4: æ··åˆæ–¹æ¡ˆ | 0.1-30ç§’ | 10-50MB | 20MB | å¤æ‚ | â­â­â­â­ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ: æ–¹æ¡ˆ2ï¼ˆä¼˜åŒ–è®¡æ•°ç®—æ³•ï¼‰

### ä¸ºä»€ä¹ˆé€‰æ‹©æ–¹æ¡ˆ2ï¼Ÿ

1. **æ€§èƒ½æå‡æ˜¾è‘—**:
   - å•æœŸä» 5-30ç§’ â†’ 0.1-0.5ç§’
   - 38æœŸä» 3-20åˆ†é’Ÿ â†’ 4-20ç§’
   - **æå‡ 60-66å€**

2. **æ— éœ€é¢å¤–å­˜å‚¨**:
   - ä»ç„¶åªä¿å­˜IDæ•°ç»„
   - ç©ºé—´å ç”¨ä¸å½“å‰ç›¸åŒ

3. **ç»“æœå®Œå…¨ç›¸åŒ**:
   - æ•°å­¦ç­‰ä»·ï¼Œä¸æ˜¯è¿‘ä¼¼
   - å¯é€šè¿‡å•å…ƒæµ‹è¯•éªŒè¯

4. **ä»£ç æ”¹åŠ¨æœ€å°**:
   - åªä¿®æ”¹ `calculatePrizeStats()` å‡½æ•°
   - ä¸å½±å“å…¶ä»–åŠŸèƒ½

5. **å†…å­˜å ç”¨æ›´ä½**:
   - ä¸éœ€è¦ä¿å­˜æ‰€æœ‰ç»„åˆå¯¹è±¡
   - åªéœ€è¦ç»Ÿè®¡è®¡æ•°å™¨

---

## ğŸ”§ æ–¹æ¡ˆ2å®ç°ä»£ç ç¤ºä¾‹

```javascript
/**
 * ğŸš€ ä¼˜åŒ–ç‰ˆï¼šé€šè¿‡å‘½ä¸­åˆ†å¸ƒç›´æ¥è®¡ç®—å¥–é¡¹ç»Ÿè®¡ï¼ˆæ€§èƒ½æå‡66å€ï¼‰
 * æ—¶é—´å¤æ‚åº¦: O(R + B) vs åŸæ¥çš„ O(R Ã— B)
 */
async calculatePrizeStatsOptimized(redHits, blueHits, actualResult) {
    const firstPrizeAmount = this.parsePrizeAmount(actualResult.FirstPrize) || 10000000;
    const secondPrizeAmount = this.parsePrizeAmount(actualResult.SecondPrize) || 100000;

    const FIXED_PRIZES = {
        third: 10000,
        fourth: 3000,
        fifth: 300,
        sixth: 200,
        seventh: 100,
        eighth: 15,
        ninth: 5
    };

    // æ­¥éª¤1: ç»Ÿè®¡çº¢çƒå‘½ä¸­åˆ†å¸ƒ O(R)
    const redDistribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0, 0: 0 };
    for (const hit of redHits) {
        redDistribution[hit.hits]++;
    }

    // æ­¥éª¤2: ç»Ÿè®¡è“çƒå‘½ä¸­åˆ†å¸ƒ O(B)
    const blueDistribution = { 2: 0, 1: 0, 0: 0 };
    for (const hit of blueHits) {
        blueDistribution[hit.hits]++;
    }

    // æ­¥éª¤3: æ•°å­¦è®¡ç®—å¥–é¡¹ O(1)
    const R5 = redDistribution[5];
    const R4 = redDistribution[4];
    const R3 = redDistribution[3];
    const R2 = redDistribution[2];
    const R1 = redDistribution[1];
    const R0 = redDistribution[0];

    const B2 = blueDistribution[2];
    const B1 = blueDistribution[1];
    const B0 = blueDistribution[0];

    const prize_stats = {
        first_prize: {
            count: R5 * B2,
            amount: (R5 * B2) * firstPrizeAmount
        },
        second_prize: {
            count: R5 * B1,
            amount: (R5 * B1) * secondPrizeAmount
        },
        third_prize: {
            count: R5 * B0,
            amount: (R5 * B0) * FIXED_PRIZES.third
        },
        fourth_prize: {
            count: R4 * B2,
            amount: (R4 * B2) * FIXED_PRIZES.fourth
        },
        fifth_prize: {
            count: (R4 * B1) + (R3 * B2),
            amount: ((R4 * B1) + (R3 * B2)) * FIXED_PRIZES.fifth
        },
        sixth_prize: {
            count: (R4 * B0) + (R3 * B1) + (R2 * B2),
            amount: ((R4 * B0) + (R3 * B1) + (R2 * B2)) * FIXED_PRIZES.sixth
        },
        seventh_prize: {
            count: (R3 * B0) + (R2 * B1) + (R1 * B2),
            amount: ((R3 * B0) + (R2 * B1) + (R1 * B2)) * FIXED_PRIZES.seventh
        },
        eighth_prize: {
            count: (R2 * B0) + (R1 * B1) + (R0 * B2),
            amount: ((R2 * B0) + (R1 * B1) + (R0 * B2)) * FIXED_PRIZES.eighth
        },
        ninth_prize: {
            count: (R1 * B0) + (R0 * B1),
            amount: ((R1 * B0) + (R0 * B1)) * FIXED_PRIZES.ninth
        }
    };

    return prize_stats;
}
```

---

## ğŸ“ éªŒè¯æ–¹æ¡ˆ

ä¸ºäº†ç¡®ä¿ä¼˜åŒ–åçš„ç»“æœä¸åŸæ¥å®Œå…¨ç›¸åŒï¼Œå»ºè®®ï¼š

1. **å•å…ƒæµ‹è¯•**: å¯¹æ¯”ä¸¤ç§æ–¹æ³•çš„ç»“æœ
2. **éšæœºæµ‹è¯•**: éšæœºç”Ÿæˆ100ç»„æ•°æ®ï¼ŒéªŒè¯ä¸€è‡´æ€§
3. **å†å²æ•°æ®å›æµ‹**: ç”¨å·²æœ‰ä»»åŠ¡æ•°æ®éªŒè¯
4. **æ€§èƒ½åŸºå‡†æµ‹è¯•**: æµ‹é‡å®é™…æå‡å€æ•°

---

## ğŸš€ å®æ–½å»ºè®®

### é˜¶æ®µ1: éªŒè¯é˜¶æ®µï¼ˆä¿å®ˆï¼‰
1. å®ç°ä¼˜åŒ–ç‰ˆå‡½æ•° `calculatePrizeStatsOptimized()`
2. ä¿ç•™åŸå‡½æ•° `calculatePrizeStats()`
3. åŒæ—¶è¿è¡Œä¸¤ä¸ªå‡½æ•°ï¼Œå¯¹æ¯”ç»“æœ
4. è®°å½•æ€§èƒ½å·®å¼‚

### é˜¶æ®µ2: ç°åº¦å‘å¸ƒï¼ˆè°¨æ…ï¼‰
1. æ·»åŠ é…ç½®å¼€å…³ `USE_OPTIMIZED_CALCULATION`
2. é»˜è®¤ä½¿ç”¨ä¼˜åŒ–ç‰ˆ
3. å‡ºé—®é¢˜å¯å¿«é€Ÿå›æ»š

### é˜¶æ®µ3: å…¨é¢æ›¿æ¢ï¼ˆè‡ªä¿¡ï¼‰
1. åˆ é™¤æ—§å‡½æ•°
2. æ¸…ç†ç›¸å…³ä»£ç 
3. æ›´æ–°æ–‡æ¡£

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¼˜åŒ–åç»“æœå®Œå…¨ç›¸åŒï¼Ÿ
A: å› ä¸ºè¿™æ˜¯æ•°å­¦ç­‰ä»·å˜æ¢ï¼Œä¸æ˜¯è¿‘ä¼¼ç®—æ³•ã€‚

åŸé€»è¾‘:
```
æ€»æ•° = éå†æ¯ä¸ª(çº¢çƒ,è“çƒ)ç»„åˆï¼Œåˆ¤æ–­å¥–é¡¹
```

ä¼˜åŒ–é€»è¾‘:
```
æ€»æ•° = (ä¸­5çº¢çš„æ•°é‡ Ã— ä¸­2è“çš„æ•°é‡) + (ä¸­5çº¢çš„æ•°é‡ Ã— ä¸­1è“çš„æ•°é‡) + ...
     = ä¹˜æ³•åˆ†é…å¾‹
```

### Q2: å¦‚æœéœ€è¦ä¿å­˜å…·ä½“ä¸­å¥–çš„ç»„åˆå‘¢ï¼Ÿ
A: å¯ä»¥åœ¨è®¡ç®—åˆ†å¸ƒæ—¶åŒæ—¶è®°å½•ï¼š
```javascript
const red5Combos = [];  // ä¿å­˜å‘½ä¸­5ä¸ªçº¢çƒçš„ç»„åˆ
for (const hit of redHits) {
    if (hit.hits === 5) {
        red5Combos.push(hit.combination);
    }
    redDistribution[hit.hits]++;
}
```

### Q3: è¿™ä¸ªä¼˜åŒ–å¯¹å°ä»»åŠ¡æœ‰å¸®åŠ©å—ï¼Ÿ
A: æœ‰ï¼å³ä½¿æ˜¯6,600ç»„åˆï¼š
- åŸæ–¹æ³•: 6,600æ¬¡å¾ªç¯
- ä¼˜åŒ–æ–¹æ³•: 100 + 66 = 166æ¬¡å¾ªç¯
- æå‡çº¦40å€

### Q4: èƒ½å¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ
A: å¯ä»¥è€ƒè™‘ï¼š
1. ä½¿ç”¨ Web Workers å¹¶è¡Œè®¡ç®—å¤šæœŸ
2. ä½¿ç”¨ SIMD æŒ‡ä»¤åŠ é€Ÿå‘½ä¸­åˆ¤æ–­
3. ç¼“å­˜å‘½ä¸­åˆ†å¸ƒï¼ˆå¦‚æœç»„åˆä¸å˜ï¼‰

ä½†æŠ•å…¥äº§å‡ºæ¯”ä¸é«˜ï¼Œæ–¹æ¡ˆ2å·²ç»è¶³å¤Ÿä¼˜ç§€ã€‚

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

é‡‡ç”¨æ–¹æ¡ˆ2åï¼š

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| å•æœŸè®¡ç®—æ—¶é—´ | 5-30ç§’ | 0.1-0.5ç§’ | 60-66å€ |
| 38æœŸä»»åŠ¡æ—¶é—´ | 3-20åˆ†é’Ÿ | 4-20ç§’ | 60-66å€ |
| å†…å­˜å ç”¨ | 50MB/æœŸ | 10MB/æœŸ | é™ä½80% |
| å­˜å‚¨ç©ºé—´ | 20MB | 20MB | ä¸å˜ |
| CPUå ç”¨ | é«˜ | ä½ | é™ä½98% |

ç”¨æˆ·ä½“éªŒæå‡ï¼š
- âœ… ä»»åŠ¡å®Œæˆé€Ÿåº¦æ›´å¿«
- âœ… ç³»ç»Ÿå“åº”æ›´æµç•…
- âœ… æ”¯æŒæ›´å¤§è§„æ¨¡ä»»åŠ¡
- âœ… é™ä½æœåŠ¡å™¨å‹åŠ›

---

**é€‰æ‹©å»ºè®®**:
- å¦‚æœè¿½æ±‚ç¨³å®š: ç»§ç»­ä½¿ç”¨æ–¹æ¡ˆ1
- å¦‚æœè¿½æ±‚æ€§èƒ½: ç«‹å³å®æ–½æ–¹æ¡ˆ2 â­â­â­â­â­
- å¦‚æœéœ€è¦çµæ´»: è€ƒè™‘æ–¹æ¡ˆ4

**æ¨è**: **æ–¹æ¡ˆ2ï¼ˆä¼˜åŒ–è®¡æ•°ç®—æ³•ï¼‰** - æœ€ä½³æ€§ä»·æ¯”ï¼Œå¼ºçƒˆæ¨èï¼
